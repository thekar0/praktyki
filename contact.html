<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Blumhouse</title>

    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="assets/main.css">
    <link rel="stylesheet" href="assets/contact.css">
    <script src="assets/burger.js"></script>



    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
    </script>
    <script type="text/javascript">
       (function(){
          emailjs.init({
            publicKey: "XNz-W1WGrxGOaFxVQ",
          });
       })();
    </script>
    <script src="assets/email_handler.js"></script>
</head>
<body>

<div id="navbar_container"></div>
<script src="assets/navbar.js"></script>

  <section id="form">
    <section id="form_left">
        <img src="assets/images/blumhouse.svg" alt="">
    </section>

    <div id="separator"></div>

    <section id="form_right">
        <form id="contactForm">
            <h2>Contact Us</h2>
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required>
            
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required>
            
            <label for="subject">Subject</label>
            <input type="text" id="subject" name="subject" required>
            
            <label for="message">Message</label>
            <textarea id="message" name="message" required></textarea>
            
            <button type="submit" id="submit_button">Send</button>
        </form>
    </section>
  </section>

<div id="footer_container"></div>
<script src="assets/footer.js"></script>

  <!-- Loading overlay -->
<div id="loadingOverlay" style="
    display:none !important; 
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.5);
    color: white;
    font-size: 2rem;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:1000;
">
  Sending...
</div>

<script>
window.onload = function() {
    const form = document.getElementById('contactForm');
    const fields = form.querySelectorAll('input, textarea');
    const submitButton = document.getElementById("submit_button");
    const loading = document.getElementById('loadingOverlay');

    // Enable button color when all fields are filled
    function checkAllFilled() {
        const allFilled = Array.from(fields).every(field => field.value.trim() !== "");
        submitButton.style.backgroundColor = allFilled ? "#4C4DDC" : "";
    }

    fields.forEach(field => field.addEventListener('input', checkAllFilled));

    // Single submit listener
    form.addEventListener('submit', function(e) {
        e.preventDefault(); // prevent default
        loading.style.display = 'flex'; // show loading

        const params = {
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            subject: document.getElementById("subject").value,
            message: document.getElementById("message").value
        };

        emailjs.send("service_1eoipdn", "template_05cn38a", params)
            .then(() => {
                form.reset();               // reset form
                loading.style.display = 'none'; // hide loading
                submitButton.style.backgroundColor = ""; // reset button color
            })
            .catch(err => {
                console.error(err);
                loading.style.display = 'none';
                alert("Failed to send");
            });
    });
};
</script>
</body>
</html>
